[gd_scene load_steps=21 format=3 uid="uid://cpe7ya4havl45"]

[ext_resource type="Script" path="res://addons/godot-xr-tools/objects/pickable.gd" id="1_iagy2"]
[ext_resource type="ArrayMesh" uid="uid://vw3x0dqpwn3i" path="res://assets/meshes/gun.obj" id="2_syvx7"]
[ext_resource type="Script" path="res://addons/godot-xr-tools/objects/grab_points/grab_point_hand.gd" id="3_3sb28"]
[ext_resource type="Animation" uid="uid://bi1l6lre2w2lp" path="res://addons/godot-xr-tools/hands/animations/left/Hold.res" id="4_tmrqc"]
[ext_resource type="Script" path="res://addons/godot-xr-tools/hands/poses/hand_pose_settings.gd" id="5_n0w6c"]
[ext_resource type="PackedScene" uid="uid://ctw7nbntd5pcj" path="res://addons/godot-xr-tools/objects/grab_points/grab_point_hand_right.tscn" id="6_d3sn7"]
[ext_resource type="Animation" uid="uid://bv5tuc1kjv0k5" path="res://addons/godot-xr-tools/hands/animations/right/Hold.res" id="7_qcb3k"]
[ext_resource type="AudioStream" uid="uid://263h3k4xtcu3" path="res://assets/sounds/shoot.mp3" id="8_mmwad"]
[ext_resource type="Script" path="res://scripts/Shoot.gd" id="9_8iue7"]
[ext_resource type="PackedScene" uid="uid://clujaf3u776a3" path="res://addons/godot-xr-tools/objects/viewport_2d_in_3d.tscn" id="10_0ttsh"]
[ext_resource type="PackedScene" uid="uid://b2jeydffx7gis" path="res://scenes/gunHUD.tscn" id="11_iybc7"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_vbocs"]
albedo_color = Color(0, 0, 0, 1)
metallic = 1.0
metallic_specular = 1.0
roughness = 0.0

[sub_resource type="Resource" id="Resource_0ojuv"]
script = ExtResource("5_n0w6c")
closed_pose = ExtResource("4_tmrqc")

[sub_resource type="Resource" id="Resource_o8c7n"]
script = ExtResource("5_n0w6c")
closed_pose = ExtResource("7_qcb3k")

[sub_resource type="BoxShape3D" id="BoxShape3D_axffm"]
size = Vector3(0.34729, 1.31049, 1.91919)

[sub_resource type="BoxShape3D" id="BoxShape3D_bf0e1"]
size = Vector3(0.0330811, 0.120468, 0.192566)

[sub_resource type="Animation" id="Animation_ftgo3"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MeshInstance3D:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0.135704, -0.106847, -0.0187078)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("MeshInstance3D:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="Animation" id="Animation_oeaoe"]
resource_name = "idle"
loop_mode = 1

[sub_resource type="Animation" id="Animation_euc7a"]
resource_name = "idle2"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("MeshInstance3D:position")
tracks/0/interp = 2
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.5),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(0.136, -0.007, -0.019), Vector3(0.135704, -0.106847, -0.0187078)]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = false
tracks/1/path = NodePath("MeshInstance3D:rotation")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(0, 0, 0)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_avnki"]
_data = {
"RESET": SubResource("Animation_ftgo3"),
"idle": SubResource("Animation_oeaoe"),
"idle2": SubResource("Animation_euc7a")
}

[node name="XRToolsPickable" type="RigidBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.1, 0)
collision_layer = 12
collision_mask = 15
gravity_scale = 0.0
script = ExtResource("1_iagy2")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(0.012, 0, 0, 0, 0.012, 0, 0, 0, 0.012, 0.135704, -0.106847, -0.0187078)
mesh = ExtResource("2_syvx7")
surface_material_override/0 = SubResource("StandardMaterial3D_vbocs")

[node name="XRToolsGrabPointHand" type="Marker3D" parent="."]
transform = Transform3D(0.998027, -0.0627905, 0, 0.0603278, 0.958883, -0.277315, 0.0174127, 0.276767, 0.960779, -0.00362838, 0, 0.0218008)
visible = false
script = ExtResource("3_3sb28")
hand_pose = SubResource("Resource_0ojuv")

[node name="GrabPointHandRight" parent="." instance=ExtResource("6_d3sn7")]
transform = Transform3D(1, 0, 0, 0, 0.958909, -0.283714, 0, 0.283714, 0.958909, -0.00729071, 0, 0.0189333)
hand_pose = SubResource("Resource_o8c7n")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, -0.00206909, -0.0405121, 0.0295044)
shape = SubResource("BoxShape3D_axffm")

[node name="Shoot" type="AudioStreamPlayer3D" parent="."]
stream = ExtResource("8_mmwad")
pitch_scale = 4.0
script = ExtResource("9_8iue7")

[node name="Viewport2Din3D" parent="." instance=ExtResource("10_0ttsh")]
transform = Transform3D(1, 0, 0, 0, 0.0088138, 0.999961, 0, -0.999961, 0.0088138, 0.0387393, 0.0252078, 0.0606083)
screen_size = Vector2(0.1, 0.1)
collision_layer = 5242880
scene = ExtResource("11_iybc7")
viewport_size = Vector2(100, 100)

[node name="Area3D" type="Area3D" parent="."]
collision_layer = 0
collision_mask = 4096

[node name="CollisionShape3D" type="CollisionShape3D" parent="Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.00311343, -0.0385125, 0.0260485)
shape = SubResource("BoxShape3D_bf0e1")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_avnki")
}

[connection signal="finished" from="Shoot" to="Shoot" method="_on_finished"]
[connection signal="area_entered" from="Area3D" to="Shoot" method="_on_area_3d_area_entered"]
